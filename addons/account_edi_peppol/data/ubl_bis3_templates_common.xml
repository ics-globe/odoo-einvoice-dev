<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="ubl_bis3_PartyType" inherit_id="account_edi_peppol.ubl_20_PartyType" primary="True">
            <xpath expr="//*[local-name()='WebsiteURI']" position="replace"/>
        </template>

        <template id="ubl_bis3_TaxSubtotalType" inherit_id="account_edi_peppol.ubl_20_TaxSubtotalType" primary="True">
            <xpath expr="//*[local-name()='TaxableAmount']" position="replace">
                <cbc:TaxableAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('taxable_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='TaxAmount']" position="replace">
                <cbc:TaxAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('tax_amount'), 2)"/>
            </xpath>
        </template>

        <template id="ubl_bis3_TaxTotalType" inherit_id="account_edi_peppol.ubl_20_TaxTotalType" primary="True">
            <xpath expr="//*[local-name()='TaxAmount']" position="replace">
                <cbc:TaxAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('tax_amount'), 2)"/>
            </xpath>
        </template>

        <template id="ubl_bis3_MonetaryTotalType" inherit_id="account_edi_peppol.ubl_20_MonetaryTotalType" primary="True">
            <xpath expr="//*[local-name()='LineExtensionAmount']" position="replace">
                <cbc:LineExtensionAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('line_extension_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='TaxExclusiveAmount']" position="replace">
                <cbc:TaxExclusiveAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('tax_exclusive_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='TaxInclusiveAmount']" position="replace">
                <cbc:TaxInclusiveAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('tax_inclusive_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='AllowanceTotalAmount']" position="replace">
                <cbc:AllowanceTotalAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('allowance_total_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='PrepaidAmount']" position="replace">
                <cbc:PrepaidAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('prepaid_amount'), 2)"/>
            </xpath>
            <xpath expr="//*[local-name()='PayableAmount']" position="replace">
                <cbc:PayableAmount
                        xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                        xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                        xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                        t-att-currencyID="vals['currency'].name"
                        t-esc="format_float(vals.get('payable_amount'), 2)"/>
            </xpath>
        </template>

    </data>
</odoo>