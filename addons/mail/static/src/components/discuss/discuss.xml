<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.Discuss" owl="1">
        <t t-if="discussView">
            <div class="o_Discuss d-flex h-100" t-attf-class="{{ className }}"
                t-att-class="{
                    'o-adding-item': discussView.discuss.isAddingChannel or discussView.discuss.isAddingChat,
                    'o-mobile flex-column bg-white': messaging.device.isMobile,
                }"
                t-ref="root"
            >
                <t t-if="!messaging.device.isMobile">
                    <DiscussSidebar className="'o_Discuss_sidebar pt-3 flex-shrink-0 overflow-auto bg-light border-right'" localId="discussView.localId"/>
                </t>
                <t t-if="messaging.device.isMobile" t-call="mail.Discuss.content"/>
                <t t-else="">
                    <div t-attf-class="o_Discuss_content d-flex flex-column overflow-auto flex-grow-1 {{ o_Discuss_noThread_bg === True ? 'bg-white' : '' }}">
                        <t t-call="mail.Discuss.content"/>
                    </div>
                </t>
            </div>
        </t>
    </t>

    <t t-name="mail.Discuss.content" owl="1">
        <t t-if="messaging.device.isMobile and discussView.discuss.activeMobileNavbarTabId === 'mailbox'">
            <DiscussMobileMailboxSelection className="'o_Discuss_mobileMailboxSelection border-bottom'" localId="discussView.localId"/>
        </t>
        <t t-if="discussView.mobileAddItemHeaderAutocompleteInputView">
            <div class="o_Discuss_mobileAddItemHeader d-flex p-3 bg-light border-bottom">
                <AutocompleteInput
                    className="'o_Discuss_mobileAddItemHeaderInput flex-grow-1 p-2 mb-3 rounded border'"
                    isFocusOnMount="true"
                    isHtml="discussView.discuss.isAddingChannel"
                    localId="discussView.mobileAddItemHeaderAutocompleteInputView.localId"
                    select="discussView.onMobileAddItemHeaderInputSelect"
                    source="_onMobileAddItemHeaderInputSource"
                    onHide="_onHideMobileAddItemHeader"
                />
            </div>
        </t>
        <t t-if="discussView.discuss.threadView">
            <t name="beforeThread"/>
            <ThreadView
                className="'o_Discuss_thread flex-grow-1'"
                classNameObj="{ 'o-mobile': messaging.device.isMobile }"
                hasComposerCurrentPartnerAvatar="!messaging.device.isMobile"
                hasComposerDiscardButton="discussView.discuss.thread === messaging.inbox"
                localId="discussView.discuss.threadView.localId"
            />
        </t>
        <t t-if="!discussView.discuss.thread and (!messaging.device.isMobile or discussView.discuss.activeMobileNavbarTabId === 'mailbox')">
            <t t-set="o_Discuss_noThread_bg" t-value="True"/>
            <div class="o_Discuss_noThread d-flex mx-auto my-auto">
                <h4 class="text-muted"><b><i>No conversation selected.</i></b></h4>
            </div>
        </t>
        <t t-if="messaging.device.isMobile and discussView.discuss.activeMobileNavbarTabId !== 'mailbox'">
            <t t-if="discussView.discuss.activeMobileNavbarTabId === 'chat'">
                <button class="o_Discuss_mobileNewChatButton btn btn-secondary border-bottom bg-light" t-on-click="discussView.onClickMobileNewChatButton">
                    Start a conversation
                </button>
            </t>
            <t t-if="discussView.discuss.activeMobileNavbarTabId === 'channel'">
                <button class="o_Discuss_mobileNewChannelButton btn btn-secondary border-bottom bg-light" t-on-click="discussView.onClickMobileNewChannelButton">
                    New Channel
                </button>
            </t>
        </t>
        <t t-if="discussView.discuss.notificationListView">
            <NotificationList className="'o_Discuss_notificationList flex-grow-1'" localId="discussView.discuss.notificationListView.localId"/>
        </t>
        <t t-if="discussView.discuss.mobileMessagingNavbarView">
            <MobileMessagingNavbar
                className="'o_Discuss_mobileNavbar'"
                localId="discussView.discuss.mobileMessagingNavbarView.localId"
            />
        </t>
    </t>

</templates>
